<!-- tabs -->
<div class="">
  <div class="detail-options">
    <div class="element-toggles list table-style">
      <div ng-if="hasControlledTerms()" class="element-toggle table-cell-style field-controlled-terms-tab"
          ng-class="{active: isTabActive('field')}"
          ng-click="toggleControlledTerm('field');  $event.stopPropagation();">
        <span><i class="cedar-svg-controll-term collapsed" style="padding-bottom:10px"></i>Field Type</span>
      </div>
      <div ng-if="hasControlledTerms()" class="element-toggle table-cell-style value-controlled-terms-tab"
          ng-class="{active: isTabActive('values')}"
          ng-click="toggleControlledTerm('values');  $event.stopPropagation();">
        <span><i class="cedar-svg-controll-term collapsed" style="padding-bottom:10px"></i>Values</span>
      </div>
      <!--<div ng-if="hasDateRange()" class="element-toggle table-cell-style date-range-tab" ng-class="{active: isTabActive('range')}"-->
      <!--ng-click="toggleControlledTerm('range');  $event.stopPropagation();">-->
      <!--<span>Range</span>-->
      <!--</div>-->
      <div ng-if="allowsMultiple()" class="element-toggle table-cell-style cardinality-tab"
          ng-class="{active: isTabActive('cardinality')}"
          ng-click="toggleControlledTerm('cardinality');  $event.stopPropagation();">
        <span>Multiple</span>
      </div>
      <div class="element-toggle table-cell-style required-tab" ng-class="{active: isTabActive('required')}"
          ng-click="toggleControlledTerm('required');  $event.stopPropagation();">
        <span>Required</span>
      </div>
      <div ng-if="allowsValueRecommendation()" class="element-toggle table-cell-style value-recommendation-tab"
          ng-class="{active: isTabActive('value-recommendation')}"
          ng-click="toggleControlledTerm('value-recommendation');  $event.stopPropagation();">
        <span>Suggestions</span>
      </div>
    </div>
  </div>

  <!-- date range -->
  <div id="range" class="type-toggle date" ng-init="initDateSingle()" ng-show="isTabActive('range')">
    <div class="single-date d-option"
        ng-click="$root.schemaOf(field)._ui.dateType = 'single-date'; $event.stopPropagation();"
        ng-class="{active: $root.schemaOf(field)._ui.dateType == 'single-date'}">
      <span>Date</span>
    </div>
    <div class="date-range d-option"
        ng-click="$root.schemaOf(field)._ui.dateType = 'date-range'; $event.stopPropagation();"
        ng-class="{active: $root.schemaOf(field)._ui.dateType == 'date-range'}">
      <span>Date Range</span>
    </div>
  </div>
  <!-- /.date-type-toggle -->

  <!-- Required tab  -->
  <div id="required" class="cardinality-options" ng-show="isTabActive('required')">
    <div class="type-toggle date">
      <div class="single-date d-option"
          ng-click="$root.schemaOf(field)._valueConstraints.requiredValue = false;  $event.stopPropagation();"
          ng-class="{active: !$root.schemaOf(field)._valueConstraints.requiredValue}">
        <span>No</span>
      </div>
      <div class="date-range d-option"
          ng-click="$root.schemaOf(field)._valueConstraints.requiredValue = true;  $event.stopPropagation();"
          ng-class="{active: $root.schemaOf(field)._valueConstraints.requiredValue}">
        <span>Yes</span>
      </div>
    </div>
  </div>

  <!-- Value Recommendation tab  -->
  <div id="value-recommendation" class="value-recommendation-options" ng-show="isTabActive('value-recommendation')">
    <div class="type-toggle date">
      <div class="single-date d-option"
          ng-click="removeValueRecommendationField($root.schemaOf(field));  $event.stopPropagation();"
          ng-class="{active: $root.schemaOf(field)._ui.valueRecommendationEnabled == undefined}">
        <span>No</span>
      </div>
      <div class="date-range d-option"
          ng-click="$root.schemaOf(field)._ui.valueRecommendationEnabled = true;  $event.stopPropagation();"
          ng-class="{active: $root.schemaOf(field)._ui.valueRecommendationEnabled}">
        <span>Yes</span>
      </div>
    </div>
  </div>

  <!-- Cardinality tab  -->
  <div id="cardinality-options" class="cardinality-options cardinality-selectors" ng-show="isTabActive('cardinality')" ng-init="initMinMax()" >
      <div class="form-group validation-pattern pull-left min-items-option" >
        <label translate>GENERIC.Min</label>
        <select class="" style="outline:none" ng-model="currentMin" title=""
            ng-change="adjustMinMax(currentMin,currentMax,'max')"
            ng-options="v as v.label for v in availableMins track by v.value" select-picker="$event.stopPropagation();">
        </select>
      </div>
      <div class="form-group validation-pattern pull-left max-items-option" >
        <label translate>GENERIC.Max</label>
        <select class="" ng-model="currentMax"
            ng-change="adjustMinMax(currentMin,currentMax,'min')"
            title="" select-picker="$event.stopPropagation();"
            ng-options="c as c.label for c in availableMaxs track by c.value">
        </select>
      </div>
    <!-- /.form-group -->
  </div>

  <!-- Field tab -->
  <div id=" field-type-options" class="cardinality-options" ng-show="isTabActive('field')">
      <div class="form-group ">
        <div class="controlled-terms controlled-term-options">
          <div class="class-container">

            <!-- field type table -->
            <div class="added-field-classes">
              <div class="class-list-container">
                <div class="class-list-table">
                  <table class="table table-hover table-striped ">
                    <thead>
                    <tr>
                      <th>Name</th>
                      <th width="250px">Description</th>
                      <th>Source</th>
                      <th>Identifier</th>
                      <th>&nbsp;</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr ng-repeat="key in addedFieldKeys">
                      <td>
                        {{getPrefLabel(key)}}
                      </td>
                      <td style="font-size:0.9em">
                        {{getShortText(getClassDescription(key), 120, '...', '-')}}
                      </td>
                      <td>
                        {{parseOntologyName(key)}}
                      </td>
                      <td tooltip="{{getShortId(getClassId(key))}}" tooltip-append-to-body="true">
                        {{getShortId(getClassId(key), 16)}}
                      </td>
                      <td>
                        <div class="class-delete" ng-click="deleteFieldAddedItem(key);  $event.stopPropagation();">
                          <i class="fa fa-times-circle"></i>
                        </div>
                      </td>
                    </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
          <div class="clear-save">
            <!-- The field.finalTitle variable is used to store the final title assigned to the field, which will be shown
            in the modal and used to perform a BioPortal initial search automatically -->
            <button type="button" class="std-button btn search-ontologies-button" ng-click="showModal(getModalId(true)); $event.stopPropagation();
          $root.finalTitle = $root.schemaOf(field)._ui.title">Search
            </button>
            <!--<button type="button" class="std-button btn search-ontologies-button">Create</button>-->
          </div>
        </div>
      </div>
    </div>

    <!-- Value tab -->
    <div id="value-options" class="cardinality-options" ng-show="isTabActive('values')">
      <div class="form-group ">
        <div class="controlled-terms controlled-term-options">
          <div class="class-container">
            <!-- value table -->
            <div class="added-field-classes">
              <div class="class-list-container">
                <div class="class-list-table">
                  <table class="table table-hover">
                    <thead>
                    <tr>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Source</th>
                      <th>Identifier</th>
                      <th width="100px">No. Values</th>
                      <th>&nbsp;</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr ng-repeat="class in $root.schemaOf(field)._valueConstraints.classes">
                      <td>{{class.prefLabel}}</td>
                      <td>Ontology Class</td>
                      <td>
                        {{class.source}}
                      </td>
                      <td tooltip="{{getShortId(class.uri)}}" tooltip-append-to-body="true">{{getShortId(class.uri,
                        16)}}
                      </td>
                      <td>1</td>
                      <td>
                        <div class="class-delete" ng-click="deleteFieldAddedClass(class); $event.stopPropagation();">
                          <i class="fa fa-times-circle"></i>
                        </div>
                      </td>
                    </tr>
                    <tr ng-repeat="valueSet in $root.schemaOf(field)._valueConstraints.valueSets">
                      <td>{{valueSet.name}}</td>
                      <td>Value Set</td>
                      <td>{{valueSet.vsCollection}}</td>
                      <td tooltip="{{getShortId(valueSet.uri)}}" tooltip-append-to-body="true">
                        {{getShortId(valueSet.uri, 16)}}
                      </td>
                      <td>{{valueSet.numTerms}}</td>
                      <td>
                        <div class="class-delete"
                            ng-click="deleteFieldAddedValueSet(valueSet);  $event.stopPropagation();">
                          <i class="fa fa-times-circle"></i>
                        </div>
                      </td>
                    </tr>
                    <tr ng-repeat="ontology in $root.schemaOf(field)._valueConstraints.ontologies">
                      <td>{{ontology.name}}</td>
                      <td>Ontology</td>
                      <td>-</td>
                      <td>{{ontology.acronym}}</td>
                      <td>{{ontology.numTerms}}</td>
                      <td>
                        <div class="class-delete"
                            ng-click="deleteFieldAddedOntology(ontology); $event.stopPropagation();">
                          <i class="fa fa-times-circle"></i>
                        </div>
                      </td>
                    </tr>
                    <tr ng-repeat="branch in $root.schemaOf(field)._valueConstraints.branches">
                      <td>{{branch.name}}</td>
                      <td>Branch</td>
                      <td>{{branch.acronym}}</td>
                      <td tooltip="{{getShortId(branch.uri)}}" tooltip-append-to-body="true">{{getShortId(branch.uri,
                        16)}}
                      </td>
                      <td>-</td>
                      <td>
                        <div class="class-delete" ng-click="deleteFieldAddedBranch(branch); $event.stopPropagation();">
                          <i class="fa fa-times-circle"></i>
                        </div>
                      </td>
                    </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
            <div class="clear-save">
              <!-- The field.finalTitle variable is used to store the final title assigned to the field, which will be shown
            in the modal -->
              <button type="button" class="std-button btn search-ontologies-button" ng-click="showModal(getModalId(false)); $event.stopPropagation();
                $root.finalTitle = $root.schemaOf(field)._ui.title">Search
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="clearfix"></div>

  <!-- field modal -->
  <div class="modal fade controlled-terms-modal" id="{{getModalId(true)}}" data-backdrop="static">
    <div class="modal-dialog">
      <div class="modal-content" style="overflow:auto">
        <div class="modal-header">
          <button type="button" class="close controlled-terms-modal-field-close" data-dismiss="modal"
              aria-label="Close"><span aria-hidden="true"><img
              src="/img/close_modal.png" width="22"/></span></button>
        </div>
        <div class="modal-body">
          <div controlled-term field="field" options='{"filterSelection":"field", "modalId":getModalId(true)}'></div>
        </div>
      </div>
    </div>
  </div>

  <!-- value modal -->
  <div class="modal fade controlled-terms-modal" id="{{getModalId(false)}}" data-backdrop="static">
    <div class="modal-dialog">
      <div class="modal-content" style="overflow:auto">
        <div class="modal-header">
          <button type="button" class="close controlled-terms-modal-value-close" data-dismiss="modal"
              aria-label="Close"><span aria-hidden="true"><img
              src="/img/close_modal.png" width="22"/></span></button>
        </div>
        <div class="modal-body">
          <div controlled-term field="field" options='{"filterSelection":"values", "modalId":getModalId(false)}'></div>
        </div>
      </div>
    </div>
  </div>

